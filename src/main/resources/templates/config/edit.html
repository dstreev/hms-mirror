<!--
  ~ Copyright (c) 2024. Cloudera, Inc. All Rights Reserved
  ~
  ~  Licensed under the Apache License, Version 2.0 (the "License");
  ~  you may not use this file except in compliance with the License.
  ~  You may obtain a copy of the License at
  ~
  ~        http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~  Unless required by applicable law or agreed to in writing, software
  ~  distributed under the License is distributed on an "AS IS" BASIS,
  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~  See the License for the specific language governing permissions and
  ~  limitations under the License.
  ~  
  -->
<!--<!DOCTYPE HTML>-->
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Create Config</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <link rel="stylesheet" type="text/css" th:href="@{/css/pure.css}">
  <link rel="stylesheet" type="text/css" th:href="@{/css/grids-responsive.css}">
  <link rel="stylesheet" type="text/css" th:href="@{/css/base.css}">
  <link rel="stylesheet" type="text/css" th:href="@{/css/tree.css}">
  <link rel="stylesheet" type="text/css" th:href="@{/css/mirror.css}">
</head>
<body>

<h1 th:text="#{${action}}"/>

  <fieldset>
    <legend th:text="#{config}"/>
    <form  class="pure-form pure-form-aligned" id="config_form" th:action="@{/config/save}"
          th:object="${config}" method="post">

      <div class="pure-control-group">
        <label for="datastrategy">Data Strategy</label>
        <select id="datastrategy" th:field="*{dataStrategy}">
          <option th:each="cet: ${supporteddatastrategyenums}"
                  th:value="${cet}"
                  th:text="${cet}"
                  th:selected="${cet.equals(config.dataStrategy)}"/>
        </select>
      </div>
      <div class="pure-control-group">
        <label for="common-storage" th:text="#{config.transfer.commonStorage}"/>
        <input class="pure-input-1-3" id="common-storage" type="text"
               th:field="*{transfer.commonStorage}"
               placeholder="Set Migration Namespace"/>
      </div>
      <div class="pure-control-group">
        <label for="datamovementstrategy"
               th:text="#{config.transfer.storageMigration.dataMovementStrategy}"></label>
        <select id="datamovementstrategy"
                th:field="*{transfer.storageMigration.dataMovementStrategy}">
          <option th:each="cet: ${datamovementstrategyenums}"
                  th:value="${cet}"
                  th:text="${cet}"
                  th:selected="${cet.equals(config.transfer.storageMigration.dataMovementStrategy)}"/>
        </select>
      </div>
      <div class="pure-control-group">
        <label for="evaluatepartitionlocation" th:text="#{config.evaluatePartitionLocation}"></label>
        <input type="checkbox" name="evaluatepartitionlocation"
               th:field="*{evaluatePartitionLocation}"
               th:checked="${config.evaluatePartitionLocation}"/>
      </div>

      <!-- Missing attributes -->
      <!--                    copyAvroSchemaUrls: false-->
      <div class="pure-control-group">
        <label for="copyAvroSchemaUrls" th:text="#{config.copyAvroSchemaUrls}"></label>
        <input type="checkbox" name="copyAvroSchemaUrls"
               th:field="*{copyAvroSchemaUrls}"
               th:checked="${config.copyAvroSchemaUrls}"/>
      </div>

      <!--                    databaseOnly: false-->
      <div class="pure-control-group">
        <label for="databaseOnly" th:text="#{config.databaseOnly}"></label>
        <input type="checkbox" name="databaseOnly"
               th:field="*{databaseOnly}"
               th:checked="${config.databaseOnly}"/>
      </div>

      <!--                    filter:-->
      <!--                        tblExcludeRegEx: null-->
      <!--                        tblRegEx: null-->
      <!--                        tblSizeLimit: -1-->
      <!--                        tblPartitionLimit: -1-->
      <div class="pure-control-group">
        <label for="tblExcludeRegEx" th:text="#{config.filter.tblExcludeRegEx}"/>
        <input class="pure-input-1-3" id="tblExcludeRegEx" type="text"
               th:field="*{filter.tblExcludeRegEx}"
               placeholder="Exclude Filter RegEx"/>
      </div>
      <div class="pure-control-group">
        <label for="tblRegEx" th:text="#{config.filter.tblRegEx}"/>
        <input class="pure-input-1-3" id="tblRegEx" type="text"
               th:field="*{filter.tblRegEx}"
               placeholder="Include Filter RegEx"/>
      </div>
      <div class="pure-control-group">
        <label for="tblSizeLimit" th:text="#{config.filter.tblSizeLimit}"/>
        <input class="pure-input-1-3" id="tblSizeLimit" type="number"
               th:field="*{filter.tblSizeLimit}"
               placeholder="Table Size Limit"/>
      </div>
      <div class="pure-control-group">
        <label for="tblPartitionLimit" th:text="#{config.filter.tblPartitionLimit}"/>
        <input class="pure-input-1-3" id="tblPartitionLimit" type="number"
               th:field="*{filter.tblPartitionLimit}"
               placeholder="Table Partition Limit"/>
      </div>

      <!--                    skipLinkCheck: false-->
      <!--                    dbPrefix: null-->
      <!--                    dbRename: null-->
      <!--                    dumpSource: "LEFT"-->
      <!--                    hybrid:-->
      <!--                        exportImportPartitionLimit: 100-->
      <!--                        sqlPartitionLimit: 3000-->
      <!--                        sqlSizeLimit: 1073741824-->
      <!--                    icebergConfig:-->
      <!--                        version: 2-->
      <!--                        tableProperties: {}-->
      <!--                    migrateACID:-->
      <!--                        "on": true-->
      <!--                        only: false-->
      <!--                        artificialBucketThreshold: 2-->
      <!--                        partitionLimit: 500-->
      <!--                        downgrade: false-->
      <!--                        inplace: false-->
      <!--                    migrateVIEW:-->
      <!--                        "on": false-->
      <!--                    migratedNonNative: false-->
      <!--                    optimization:-->
      <!--                        sortDynamicPartitionInserts: false-->
      <!--                        skip: false-->
      <!--                        autoTune: false-->
      <!--                        compressTextOutput: false-->
      <!--                        skipStatsCollection: false-->
      <!--                        overrides:-->
      <!--                            left: {}-->
      <!--                            right: {}-->
      <!--                        buildShadowStatistics: false-->
      <!--                    outputDirectory: "/Users/dstreev/.hms-mirror/reports/2024-06-06_09-24-20"-->
      <!--                    quiet: false-->
      <!--                    readOnly: false-->
      <!--                    noPurge: false-->
      <!--                    replace: false-->
      <!--                    resetRight: false-->
      <!--                    resetToDefaultLocation: false-->
      <!--                    skipFeatures: false-->
      <!--                    skipLegacyTranslation: false-->
      <!--                    sqlOutput: true-->
      <!--                    sync: false-->
      <!--                    transfer:-->
      <!--                        transferPrefix: "hms_mirror_transfer_"-->
      <!--                        shadowPrefix: "hms_mirror_shadow_"-->
      <!--                        exportBaseDirPrefix: "/apps/hive/warehouse/export_"-->
      <!--                        remoteWorkingDirectory: "hms_mirror_working"-->
      <!--                        intermediateStorage: null-->
      <!--                        commonStorage: "ofs://OHOME90"-->
      <!--                        storageMigration:-->
      <!--                            dataMovementStrategy: "DISTCP"-->
      <!--                            dataFlow: "PULL"-->
      <!--                            strict: true-->
      <!--                        warehouse:-->
      <!--                            managedDirectory: null-->
      <!--                            externalDirectory: null-->
      <!--                    transferOwnership: false-->
      <!--                    translator:-->
      <!--                        forceExternalLocation: false-->

      </div>
      <div class="pure-u-2-4 pure-form-stacked">
        <!--                    <label th:text="#{config.databases}"/>-->
        <!--                    <input disabled="disabled"-->
        <!--                           th:each="database, itemStat: *{databases}" type="text"-->
        <!--                           th:field="*{databases[__${itemStat.index}__]}"/>-->
      </div>

    </form>
  </fieldset>


</body>
</html>